from src.helpers import strip
from src.polynomial.multiplication import multiply


def test_degree_1_example():
    f = [1, 4]
    g = [-5, 1]
    modulus = 3

    assert multiply(f, g, modulus) == [1, 2, 1]

    print(multiply(f, g, modulus))


def test_degree_3_example():
    f = [1, 4, 1, 1]
    g = [-5, 1]
    modulus = 3

    assert strip(multiply(f, g, modulus)) == [1, 2, 2, 2, 1]


def test_length_1():
    f = [4]
    g = [2]
    modulus = 17

    assert multiply(f, g, modulus) == [8]

# Stress test, somewhat rudimentary
def test_speed():
    f = [387, 14, 83, 80, 453, 189, 343, 314, 388, 295, 88, 251, 29, 306, 145, 252, 46, 188, 447, 270,
          482, 330, 494, 405, 448, 472, 92, 275, 294, 44, 92, 6, 1, 331, 437, 475, 399, 16, 21, 264, 
          275, 240, 181, 371, 447, 123, 322, 96, 103, 425, 421, 141, 409, 437, 169, 295, 342, 296, 392,
            350, 449, 49, 37, 450, 389, 302, 139, 309, 283, 142, 507, 97, 235, 120, 5, 285, 425, 232, 
            158, 404, 151, 115, 153, 258, 39, 42, 49, 76, 87, 278, 68, 217, 246, 359, 154, 22, 203, 182,
            115, 201, 31, 457, 461, 441, 221, 138, 124, 256, 13, 365, 43, 429, 234, 403, 49, 388, 102, 
            391, 378, 400, 226, 431, 256, 302, 439, 154, 99, 169]
    g = [331, 319, 19, 22, 236, 443, 348, 137, 358, 257, 165, 188, 103, 410, 368, 236, 165, 326, 70, 88, 
         373, 202, 481, 446, 12, 75, 332, 392, 336, 166, 404, 323, 375, 414, 76, 436, 458, 351, 252, 205,
           207, 40, 471, 1, 334, 149, 432, 204, 276, 411, 194, 450, 74, 467, 504, 174, 419, 95, 214, 227, 
           290, 29, 81, 131, 110, 387, 353, 0, 122, 224, 49, 143, 69, 10, 220, 267, 199, 101, 174, 319, 
           213, 257, 259, 301, 411, 279, 251, 257, 349, 171, 104, 277, 18, 258, 376, 272, 60, 409, 304, 
           138, 278, 174, 425, 490, 456, 95, 393, 317, 86, 408, 88, 500, 247, 46, 233, 137, 29, 135, 34, 
           93, 447, 311, 220, 146, 467, 204, 205, 461]
    modulus = 509

    multiply(f, g, modulus)
    assert True
